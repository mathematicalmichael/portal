"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[327],{327:function(e,t,n){n.r(t),n.d(t,{Terminal:function(){return c}});var r=n(7437),s=n(2265);function c(){let[e,t]=(0,s.useState)(""),[n,c]=(0,s.useState)([]),[o,a]=(0,s.useState)(-1),{messages:l,sendMessage:u,connectionStatus:i}=function(e){let[t,n]=(0,s.useState)(null),[r,c]=(0,s.useState)([]),[o,a]=(0,s.useState)("connecting");return(0,s.useEffect)(()=>{{let t=new WebSocket(e);return t.onopen=()=>{console.log("Connected to WebSocket"),a("connected")},t.onmessage=e=>{c(t=>[...t,{type:"output",content:e.data}])},t.onerror=e=>{console.error("WebSocket error:",e),a("error")},t.onclose=()=>{console.log("Disconnected from WebSocket"),a("disconnected")},n(t),()=>{t.close()}}},[e]),{messages:r,sendMessage:(0,s.useCallback)(e=>{t&&t.readyState===WebSocket.OPEN&&(t.send(e),c(t=>[...t,{type:"input",content:e}]))},[t]),connectionStatus:o}}("wss://art.math.computer"),d=(0,s.useRef)(null),p=(0,s.useRef)(null);return(0,s.useEffect)(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[l]),(0,r.jsxs)("div",{className:"bg-black text-green-500 p-4 font-mono h-screen flex flex-col",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{children:"Note: This page is an experimental web emulator."}),(0,r.jsx)("p",{children:"You are advised to use a Terminal + wscat for optimal UX: https://github.com/websockets/wscat"}),(0,r.jsx)("p",{children:"($ npm i -g wscat)"}),(0,r.jsx)("p",{children:"wscat -c wss://art.math.computer"}),(()=>{switch(i){case"connecting":return(0,r.jsx)("div",{className:"text-yellow-500",children:"Connecting..."});case"connected":return(0,r.jsx)("div",{className:"text-green-500",children:"Connected to WebSocket server."});case"disconnected":return(0,r.jsx)("div",{className:"text-red-500",children:"Disconnected"});case"error":return(0,r.jsx)("div",{className:"text-red-500",children:"Connection Error"});default:return null}})()]}),(0,r.jsx)("div",{ref:d,className:"flex-1 overflow-y-auto mb-4 whitespace-pre-wrap break-words",children:l.map((e,t)=>(0,r.jsxs)("div",{children:["input"===e.type?"> ":"< ",e.content]},t))}),(0,r.jsxs)("form",{onSubmit:n=>{n.preventDefault(),e.trim()&&"connected"===i&&(u(e),c(t=>[...t,e]),t(""),a(-1))},className:"flex",children:[(0,r.jsx)("span",{className:"mr-2",children:"$"}),(0,r.jsx)("input",{ref:p,type:"text",value:e,onChange:e=>t(e.target.value),onKeyDown:e=>{"ArrowUp"===e.key?(e.preventDefault(),o<n.length-1&&(a(o+1),t(n[n.length-1-o-1]))):"ArrowDown"===e.key&&(e.preventDefault(),o>-1&&(a(o-1),t(0===o?"":n[n.length-1-o+1])))},className:"flex-1 bg-transparent outline-none text-green-500",autoFocus:!0,disabled:"connected"!==i})]})]})}}}]);